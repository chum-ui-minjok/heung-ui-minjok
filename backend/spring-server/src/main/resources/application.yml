spring:
  application:
    name: heungbuja-be

  profiles:
    active: ${SPRING_PROFILES_ACTIVE:prod}

  # mysql
  datasource:
    url: ${SPRING_DATASOURCE_URL:jdbc:mysql://mysql:3306/${MYSQL_DATABASE:appdb}?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Seoul&characterEncoding=utf8}
    username: ${SPRING_DATASOURCE_USERNAME:${MYSQL_USER:appuser}}
    password: ${SPRING_DATASOURCE_PASSWORD:${MYSQL_PASSWORD}}
    driver-class-name: ${SPRING_DATASOURCE_DRIVER:com.mysql.cj.jdbc.Driver}

  # Mongo db, Redis
  data:
    mongodb:
      uri: ${SPRING_DATA_MONGODB_URI:mongodb://localhost:27017/heungbuja} # 기본값은 로컬
    redis:
      host: ${SPRING_DATA_REDIS_HOST:localhost} # 기본값은 로컬
      port: ${SPRING_DATA_REDIS_PORT:6379}     # 기본값은 로컬

  jpa:
    database-platform: org.hibernate.dialect.MySQL8Dialect
    hibernate:
      ddl-auto: update
      naming:
        physical-strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
    properties:
      hibernate:
        format_sql: false
        show_sql: false
    open-in-view: false

server:
  port: 8080
  shutdown: graceful
  servlet:
    context-path: /api

logging:
  level:
    root: INFO
    com.heungbuja: INFO
    org.springframework.web.socket: INFO

jwt:
  secret: ${JWT_SECRET:heungbuja-secret-key-for-jwt-token-generation-minimum-256-bits-required-for-hs256-algorithm}
  access-token-validity: 3600000  # 1시간 (밀리초)
  refresh-token-validity: 604800000  # 7일 (밀리초)

# TTS 설정
tts:
  storage:
    path: ${TTS_STORAGE_PATH:./tts-files}
# OpenAI GMS API 설정
openai:
  gms:
    api-key: ${OPENAI_GMS_API_KEY:your-gms-api-key-here}
    stt:
      url: https://gms.ssafy.io/gmsapi/api.openai.com/v1/audio/transcriptions
    tts:
      url: https://gms.ssafy.io/gmsapi/api.openai.com/v1/audio/speech

app:
  s3:
    bucket: ${APP_S3_BUCKET:heungbuja-bucket}
    region: ${APP_S3_REGION:ap-northeast-2}
    url-ttl-minutes: ${APP_S3_URL_TTL_MINUTES:30}
